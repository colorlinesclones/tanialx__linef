(this.webpackJsonplinef=this.webpackJsonplinef||[]).push([[0],{16:function(e,t,r){"use strict";r.r(t);var n=r(2),s=r(3),o=r(7),a=r(5),c=r(4),i=r(1),l=r.n(i),u=r(10),h=r.n(u),d=(r(9),r(6)),f=r(0),p=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return Object(f.jsx)("svg",{height:2*this.props.y,width:2*this.props.x,children:Object(f.jsx)("circle",{cx:this.props.x,cy:this.props.y,r:this.props.r,stroke:"#555555",strokeWidth:"1",fill:this.props.color})})}}]),r}(l.a.Component),v=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActivated!==e.isActivated||(null!==this.props.item||null!==e.item)&&(null===this.props.item||null===e.item||(this.props.item.type!==e.item.type||this.props.item.color!==e.item.color))}},{key:"render",value:function(){var e,t=this;null!=this.props.item&&(e=Object(f.jsx)(p,{x:"22",y:"22",color:this.props.item.color,r:"p"===this.props.item.type?15:5}));var r=this.props.isActivated?"square square-active":"square";return Object(f.jsx)("div",{className:r,onClick:function(){return t.props.onClick()},children:e})}}]),r}(l.a.Component),b=function(){function e(t,r,s){Object(n.a)(this,e),this.f={reachable_index:[t],reachable_from:[t],newly_added:[t]},this.b={reachable_index:[r],reachable_from:[r],newly_added:[r]},this.func_getNeighbors=s}return Object(s.a)(e,[{key:"traceBackRoute",value:function(e,t){for(var r=[],n=e.reachable_index.indexOf(t);0!==n;){var s=e.reachable_from[n];r.push(e.reachable_from[s]),n=s}return r}},{key:"findCommonIndex",value:function(){var e,t=Object(d.a)(this.f.reachable_index);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(this.b.reachable_index.includes(r))return r}}catch(n){t.e(n)}finally{t.f()}return-1}},{key:"constructRouteFromCommonIndex",value:function(e){var t=this.traceBackRoute(this.f,e);return t.reverse(),t.push(e),t.concat(this.traceBackRoute(this.b,e)),t}},{key:"tryConstructRouteFromCommonIndex",value:function(){var e=this.findCommonIndex();return e>=0?this.constructRouteFromCommonIndex(e):[]}},{key:"scanNextLevelF",value:function(){this.scanNextLevel(this.f)}},{key:"scanNextLevelB",value:function(){this.scanNextLevel(this.b)}},{key:"scanNextLevel",value:function(e){var t,r=[],n=Object(d.a)(e.newly_added);try{for(n.s();!(t=n.n()).done;){var s=t.value,o=e.reachable_index.indexOf(s),a=this.func_getNeighbors(s);a=a.filter((function(t){return!e.reachable_index.includes(t)}));var c,i=Object(d.a)(a);try{for(i.s();!(c=i.n()).done;){var l=c.value;e.reachable_index.push(l),e.reachable_from.push(o)}}catch(u){i.e(u)}finally{i.f()}r=r.concat(a)}}catch(u){n.e(u)}finally{n.f()}return e.newly_added=r,e}},{key:"findRoute",value:function(){for(var e=!1,t=[];!e;){if(this.scanNextLevelF(),0===this.f.newly_added.length){e=!1;break}if((t=this.tryConstructRouteFromCommonIndex())&&t.length>0){e=!0;break}if(this.scanNextLevelB(),0===this.b.newly_added.length){e=!1;break}if((t=this.tryConstructRouteFromCommonIndex())&&t.length>0){e=!0;break}}return{found:e,route:t}}}]),e}(),y=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).validNeighborIndex=function(e){var t=e-s.w,r=e-1,n=e+1,o=e+s.w,a=[],c=s.lineWrapOfIndex(e);return t>=0&&a.push(t),r>=c.start&&a.push(r),n<c.end&&a.push(n),o<s.w*s.h&&a.push(o),a.filter((function(e){return s.indexNotOccupied(e)}))},s.w=parseInt(s.props.w),s.h=parseInt(s.props.h),s.colors=["#FF9494","#FFD08B","#E2E68C","#A8F0D4","#9DE2FE","#C5B8F0","#FBD8FF"],s.numberOfPreRenderedItemAtEachMove=3,s.state={squares:s.initArray(),selected:null},s}return Object(s.a)(r,[{key:"initArray",value:function(){for(var e=Array(this.w*this.h).fill(null),t=this.numberOfPreRenderedItemAtEachMove,r=this.randomFreeSquareIndex(5+t,e,[]),n=0;n<5;n++)e[r.pop()]={type:"p",color:this.colors[Math.floor(Math.random()*this.colors.length)]};for(var s=0;s<t;s++)e[r.pop()]={type:"f",color:this.colors[Math.floor(Math.random()*this.colors.length)]};return e}},{key:"fItems",value:function(){var e,t=[],r=this.state.squares;for(e=0;e<r.length;e++)r[e]&&"f"===r[e].type&&t.push(e);return t}},{key:"randomFreeSquareIndex",value:function(e,t,r){for(var n=[],s=t.reduce((function(e,t,n){return null!==t||r.includes(n)||e.push(n),e}),[]),o=0;o<e;o++){var a=Math.floor(Math.random()*s.length);n.push(s.splice(a,1)[0])}return n}},{key:"lineWrapOfIndex",value:function(e){var t=Math.floor(e/this.h)*this.w;return{start:t,end:t+this.w}}},{key:"indexNotOccupied",value:function(e){return null===this.state.squares[e]||"f"===this.state.squares[e].type}},{key:"movable",value:function(e,t){var r=new b(e,t,this.validNeighborIndex).findRoute();return{found:r.found,route:r.route}}},{key:"onSquareClicked",value:function(e){if(null!==this.state.squares[e]&&"p"===this.state.squares[e].type)this.setState({selected:e});else if(null!=this.state.selected&&this.movable(this.state.selected,e).found){var t=null,r=this.fItems(),n=[e],s=this.state.squares.slice();if(s[e]&&"f"===s[e].type){var o=(t=this.randomFreeSquareIndex(this.numberOfPreRenderedItemAtEachMove+1,s,[e,this.state.selected])).pop();s[o]={type:"p",color:s[e].color},n.push(o),r.splice(r.indexOf(e),1)}else t=this.randomFreeSquareIndex(this.numberOfPreRenderedItemAtEachMove,s,[e,this.state.selected]);r.forEach((function(e){s[e]={type:"p",color:s[e].color},n.push(e)}));for(var a=0;a<this.numberOfPreRenderedItemAtEachMove;a++)s[t.pop()]={type:"f",color:this.colors[Math.floor(Math.random()*this.colors.length)]};s[e]={type:s[this.state.selected].type,color:s[this.state.selected].color},s[this.state.selected]=null;var c,i=this.checkResolved(s,n),l=Object(d.a)(i);try{for(l.s();!(c=l.n()).done;){var u=c.value;s[u]=null}}catch(h){l.e(h)}finally{l.f()}this.setState({squares:s,selected:null}),i.length>0&&this.props.score_incr(i.length)}else this.setState({selected:null})}},{key:"checkResolved",value:function(e,t){var r=[],n=this.w,s=this.h;return t.forEach((function(t){for(var o=e[t].type,a=e[t].color,c=Math.floor(t/s)*n,i=c+n,l=[],u=t+1;u<i&&e[u]&&e[u].type===o&&e[u].color===a;u++)l.push(u);for(var h=[],d=t-1;d>=c&&e[d]&&e[d].type===o&&e[d].color===a;d--)h.push(d);h.length+l.length+1>=5&&(r=[t].concat(l,h));for(var f=[],p=t+n;p<e.length&&e[p]&&e[p].type===o&&e[p].color===a;p+=n)f.push(p);for(var v=[],b=t-n;b>=0&&e[b]&&e[b].type===o&&e[b].color===a;b-=n)v.push(b);v.length+f.length+1>=5&&(r=[t].concat(f,v));for(var y=[],m=t+n+1;m<e.length&&e[m]&&e[m].type===o&&e[m].color===a;m+=n+1)y.push(m);for(var j=[],x=t-n-1;x>=0&&e[x]&&e[x].type===o&&e[x].color===a;x-=n+1)j.push(x);j.length+y.length+1>=5&&(r=[t].concat(y,j));for(var O=[],k=t+n-1;k<e.length&&e[k]&&e[k].type===o&&e[k].color===a;k+=n-1)O.push(k);for(var g=[],I=t-n+1;I>=0&&e[I]&&e[I].type===o&&e[I].color===a;I-=n-1)g.push(I);g.length+O.length+1>=5&&(r=[t].concat(O,g))})),r}},{key:"renderSquare",value:function(e){var t=this;return Object(f.jsx)(v,{item:this.state.squares[e],onClick:function(){return t.onSquareClicked(e)},isActivated:this.state.selected===e},e)}},{key:"renderRows",value:function(){for(var e=[],t=0;t<this.state.squares.length;t++)e.push(this.renderSquare(t));return e}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"game-board",children:this.renderRows()})}}]),r}(l.a.Component),m=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return Object(f.jsx)("span",{children:this.props.score})}}]),r}(l.a.Component),j=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).state={score:0},s.increaseScore=s.increaseScore.bind(Object(o.a)(s)),s}return Object(s.a)(r,[{key:"increaseScore",value:function(e){this.setState({score:this.state.score+e})}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"game",children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"score-board",children:[Object(f.jsx)("span",{children:"Score: "}),Object(f.jsx)(m,{score:this.state.score})]}),Object(f.jsx)(y,{w:"9",h:"9",score_incr:this.increaseScore})]})})}}]),r}(l.a.Component);h.a.render(Object(f.jsx)(j,{}),document.getElementById("root"))},9:function(e,t,r){}},[[16,1,2]]]);
//# sourceMappingURL=main.959c6791.chunk.js.map