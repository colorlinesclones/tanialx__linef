(this.webpackJsonplinef=this.webpackJsonplinef||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),i=n(9),s=n.n(i),o=(n(14),n(1)),u=n(2),c=n(6),l=n(5),h=n(4),d=n(0),f=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(d.jsx)("span",{children:this.props.score})}}]),n}(a.a.Component),v=n(7),b=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(d.jsx)("svg",{height:"100%",width:"100%",children:Object(d.jsx)("circle",{cx:"50%",cy:"50%",r:this.props.r,stroke:"#555555",strokeWidth:"1",fill:this.props.color})})}}]),n}(a.a.PureComponent),p=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).onClick=r.onClick.bind(Object(c.a)(r)),r}return Object(u.a)(n,[{key:"onClick",value:function(){this.props.onClick(this.props.identifier)}},{key:"render",value:function(){var e;null!=this.props.item&&(e=Object(d.jsx)(b,{x:"22",y:"22",color:this.props.item.color,r:"p"===this.props.item.type?"30%":"10%"}));var t=this.props.isActivated?"square square-active":"square";return Object(d.jsx)("div",{className:t,onClick:this.onClick,children:e})}}]),n}(a.a.PureComponent),m=function(){function e(t,n,r){Object(o.a)(this,e),this.f={reachable_index:[t],reachable_from:[t],newly_added:[t]},this.b={reachable_index:[n],reachable_from:[n],newly_added:[n]},this.func_getNeighbors=r}return Object(u.a)(e,[{key:"traceBackRoute",value:function(e,t){for(var n=[],r=e.reachable_index.indexOf(t);0!==r;){var a=e.reachable_from[r];n.push(e.reachable_from[a]),r=a}return n}},{key:"findCommonIndex",value:function(){var e,t=Object(v.a)(this.f.reachable_index);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this.b.reachable_index.includes(n))return n}}catch(r){t.e(r)}finally{t.f()}return-1}},{key:"constructRouteFromCommonIndex",value:function(e){var t=this.traceBackRoute(this.f,e);return t.reverse(),t.push(e),t.concat(this.traceBackRoute(this.b,e)),t}},{key:"tryConstructRouteFromCommonIndex",value:function(){var e=this.findCommonIndex();return e>=0?this.constructRouteFromCommonIndex(e):[]}},{key:"scanNextLevelF",value:function(){this.scanNextLevel(this.f)}},{key:"scanNextLevelB",value:function(){this.scanNextLevel(this.b)}},{key:"scanNextLevel",value:function(e){var t,n=[],r=Object(v.a)(e.newly_added);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=e.reachable_index.indexOf(a),s=this.func_getNeighbors(a);s=s.filter((function(t){return!e.reachable_index.includes(t)}));var o,u=Object(v.a)(s);try{for(u.s();!(o=u.n()).done;){var c=o.value;e.reachable_index.push(c),e.reachable_from.push(i)}}catch(l){u.e(l)}finally{u.f()}n=n.concat(s)}}catch(l){r.e(l)}finally{r.f()}return e.newly_added=n,e}},{key:"findRoute",value:function(){for(var e=!1,t=[];!e;){if(this.scanNextLevelF(),0===this.f.newly_added.length){e=!1;break}if((t=this.tryConstructRouteFromCommonIndex())&&t.length>0){e=!0;break}if(this.scanNextLevelB(),0===this.b.newly_added.length){e=!1;break}if((t=this.tryConstructRouteFromCommonIndex())&&t.length>0){e=!0;break}}return{found:e,route:t}}}]),e}(),y=function(){function e(t,n){Object(o.a)(this,e),this.type=t,this.color=n}return Object(u.a)(e,[{key:"isPresentItem",value:function(){return"p"===this.type}},{key:"isFutureItem",value:function(){return"f"===this.type}},{key:"isFree",value:function(){return"p"!==this.type}}],[{key:"copy",value:function(t){return t?new e(t.type,t.color):null}},{key:"isIdentical",value:function(e,t){return null!==e&&null!==t&&(e.type===t.type&&e.color===t.color)}}]),e}();function j(e,t,n,r){for(var a=[],i=t.reduce((function(e,a,i){return null===a&&n(t,i)&&!r.includes(i)&&e.push(i),e}),[]),s=0;s<e&&i.length>0;s++){var o=Math.floor(Math.random()*i.length);a.push(i.splice(o,1)[0])}return a}function k(e,t,n){var r=n.w,a=n.h,i=[];return t.forEach((function(t){i=i.concat(function(e,t,n){var r=n.w,a=n.h,i=Math.floor(t/a)*r,s={start:i,end:i+r};return O(e,t,1,{forward_bound:s.end,backward_bound:s.start})}(e,t,{w:r,h:a})).concat(function(e,t,n){var r=n.w;n.h;return O(e,t,r,{forward_bound:e.length,backward_bound:0})}(e,t,{w:r,h:a})).concat(function(e,t,n){var r=n.w,a=(n.h,[]);return a=(a=a.concat(O(e,t,r+1,{forward_bound:e.length,backward_bound:0}))).concat(O(e,t,r-1,{forward_bound:e.length,backward_bound:0}))}(e,t,{w:r,h:a}))})),i}function O(e,t,n,r){for(var a=r.forward_bound,i=r.backward_bound,s=[],o=[],u=t+n;u<a&&y.isIdentical(e[u],e[t]);u+=n)o.push(u);for(var c=[],l=t-n;l>=i&&y.isIdentical(e[l],e[t]);l-=n)c.push(l);return c.length+o.length+1>=5&&(s=[t].concat(o,c)),s}var w=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).w=parseInt(r.props.w),r.h=parseInt(r.props.h),r.colors=["#FF9494","#FFD08B","#E2E68C","#A8F0D4","#9DE2FE","#C5B8F0","#FBD8FF"],r.noRandomF=3,r.state={squares:r.initArray(),selected:null},r.onSquareSelected=r.onSquareSelected.bind(Object(c.a)(r)),r.validNeighborIndex=r.validNeighborIndex.bind(Object(c.a)(r)),r}return Object(u.a)(n,[{key:"randomColor",value:function(){return this.colors[Math.floor(Math.random()*this.colors.length)]}},{key:"newPresentItem",value:function(e){return new y("p",e||this.randomColor())}},{key:"newFutureItem",value:function(){return new y("f",this.randomColor())}},{key:"initArray",value:function(){for(var e=Array(this.w*this.h).fill(null),t=this.noRandomF,n=j(5+t,e,(function(){return!0}),[]),r=0;r<5;r++)e[n.pop()]=this.newPresentItem();for(var a=0;a<t;a++)e[n.pop()]=this.newFutureItem();return e}},{key:"indexOfCurrentFutureItems",value:function(){var e,t=[],n=this.state.squares;for(e=0;e<n.length;e++)n[e]&&n[e].isFutureItem()&&t.push(e);return t}},{key:"lineWrapOfIndex",value:function(e){var t=Math.floor(e/this.h)*this.w;return{start:t,end:t+this.w}}},{key:"validNeighborIndex",value:function(e){var t=this,n=e-this.w,r=e-1,a=e+1,i=e+this.w,s=[],o=this.lineWrapOfIndex(e);return n>=0&&s.push(n),r>=o.start&&s.push(r),a<o.end&&s.push(a),i<this.w*this.h&&s.push(i),s.filter((function(e){return t.isSquareFree(t.state.squares,e)}))}},{key:"isSquareFree",value:function(e,t){return null===e[t]||e[t].isFree()}},{key:"movable",value:function(e,t){var n=new m(e,t,this.validNeighborIndex).findRoute();return{found:n.found,route:n.route}}},{key:"updateState_moveFrom",value:function(e){this.setState({selected:e})}},{key:"updateState_moveItemTo",value:function(e){var t=this,n=null,r=this.indexOfCurrentFutureItems(),a=[e],i=this.state.squares.slice(),s=i[e]&&i[e].isFutureItem(),o=y.copy(i[e]);i[e]=y.copy(i[this.state.selected]),i[this.state.selected]=null;var u=k(i,a,{w:this.w,h:this.h});if(0===u.length){if(a=[],s){var c=(n=j(this.noRandomF+1,i,this.isSquareFree,[e])).pop();i[c]=o,r.splice(r.indexOf(e),1),r.push(c)}else n=j(this.noRandomF,i,this.isSquareFree,[e]);r.forEach((function(e){i[e]=t.newPresentItem(i[e].color),a.push(e)}));for(var l=0;l<this.noRandomF&&n.length>0;l++)i[n.pop()]=this.newFutureItem();u=k(i,a,{w:this.w,h:this.h});var h,d=Object(v.a)(u);try{for(d.s();!(h=d.n()).done;){var f=h.value;i[f]=null}}catch(O){d.e(O)}finally{d.f()}}else{var b,p=Object(v.a)(u);try{for(p.s();!(b=p.n()).done;){var m=b.value;i[m]=null}}catch(O){p.e(O)}finally{p.f()}s&&(i[e]=o)}this.setState({squares:i,selected:null}),u.length>0&&this.props.score_incr(u.length)}},{key:"onSquareSelected",value:function(e){this.state.squares[e]&&this.state.squares[e].isPresentItem()?this.updateState_moveFrom(e):null!=this.state.selected&&this.movable(this.state.selected,e).found&&this.updateState_moveItemTo(e)}},{key:"renderSquare",value:function(e){return Object(d.jsx)(p,{item:this.state.squares[e],identifier:e,onClick:this.onSquareSelected,isActivated:this.state.selected===e},e)}},{key:"renderRows",value:function(){for(var e=[],t=0;t<this.state.squares.length;t++)e.push(this.renderSquare(t));return e}},{key:"render",value:function(){return Object(d.jsx)("div",{className:"game-board",children:this.renderRows()})}}]),n}(a.a.PureComponent),x=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={score:0},r.increaseScore=r.increaseScore.bind(Object(c.a)(r)),r}return Object(u.a)(n,[{key:"increaseScore",value:function(e){this.setState({score:this.state.score+e})}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"game",children:[Object(d.jsxs)("div",{className:"score-board",children:[Object(d.jsx)("span",{children:"Score: "}),Object(d.jsx)(f,{score:this.state.score})]}),Object(d.jsx)(w,{w:"9",h:"9",score_incr:this.increaseScore})]})}}]),n}(a.a.PureComponent);s.a.render(Object(d.jsx)(x,{}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.e3c7502c.chunk.js.map