(this.webpackJsonplinef=this.webpackJsonplinef||[]).push([[0],{16:function(e,t,r){"use strict";r.r(t);var s=r(2),n=r(3),o=r(6),a=r(5),c=r(4),i=r(1),l=r.n(i),h=r(9),u=r.n(h),p=(r(8),r(10)),f=r(0),d=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"render",value:function(){return Object(f.jsx)("svg",{height:2*this.props.y,width:2*this.props.x,children:Object(f.jsx)("circle",{cx:this.props.x,cy:this.props.y,r:this.props.r,stroke:"#555555",strokeWidth:"1",fill:this.props.color})})}}]),r}(l.a.Component),v=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActivated!==e.isActivated||(null!==this.props.item||null!==e.item)&&(null===this.props.item||null===e.item||(this.props.item.type!==e.item.type||this.props.item.color!==e.item.color))}},{key:"render",value:function(){var e,t=this;null!=this.props.item&&(e=Object(f.jsx)(d,{x:"22",y:"22",color:this.props.item.color,r:"p"===this.props.item.type?15:5}));var r=this.props.isActivated?"square square-active":"square";return Object(f.jsx)("div",{className:r,onClick:function(){return t.props.onClick()},children:e})}}]),r}(l.a.Component),y=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).w=parseInt(n.props.w),n.h=parseInt(n.props.h),n.colors=["#FF9494","#FFD08B","#E2E68C","#A8F0D4","#9DE2FE","#C5B8F0","#FBD8FF"],n.numberOfPreRenderedItemAtEachMove=3,n.state={squares:n.initArray(),selected:null},n}return Object(n.a)(r,[{key:"initArray",value:function(){for(var e=Array(this.w*this.h).fill(null),t=this.numberOfPreRenderedItemAtEachMove,r=this.randomFreeSquareIndex(5+t,e,[]),s=0;s<5;s++)e[r.pop()]={type:"p",color:this.colors[Math.floor(Math.random()*this.colors.length)]};for(var n=0;n<t;n++)e[r.pop()]={type:"f",color:this.colors[Math.floor(Math.random()*this.colors.length)]};return e}},{key:"fItems",value:function(){var e,t=[],r=this.state.squares;for(e=0;e<r.length;e++)r[e]&&"f"===r[e].type&&t.push(e);return t}},{key:"randomFreeSquareIndex",value:function(e,t,r){for(var s=[],n=t.reduce((function(e,t,s){return null!==t||r.includes(s)||e.push(s),e}),[]),o=0;o<e;o++){var a=Math.floor(Math.random()*n.length);s.push(n.splice(a,1)[0])}return s}},{key:"lineWrapOfIndex",value:function(e){var t=Math.floor(e/this.h)*this.w;return{start:t,end:t+this.w}}},{key:"movable",value:function(e,t){for(var r=this,s=this.state.squares,n=s.length,o=this.w,a=function(e){return null===s[e]||"f"===s[e].type},c=e,i=[e],l={},h=!1,u=!0,p=!1,f=[],d=function(e){return i.includes(e)||f.includes(e)};u;){if(h)if(f.push(i.pop()),0===i.length)u=!1,p=!1;else{var v=i[i.length-1],y=l[v];y&&0!==y.length?(c=y.pop(),i.push(c),h=!1):h=!0}else if("break"===function(){var e=r.lineWrapOfIndex(c),s=[],f=c-o,v=c-1,y=c+1,b=c+o;if(f===t||v===t||y===t||b===t)return u=!1,p=!0,i.push(t),"break";f>=0&&a(f)&&!d(f)&&s.push(f),v>=e.start&&a(v)&&!d(v)&&s.push(v),y<e.end&&a(y)&&!d(y)&&s.push(y),b<n&&a(b)&&!d(b)&&s.push(b);var j=function(e){return{x:e%o,y:Math.floor(e/o)}},m=function(e,t){var r=e.x-t.x,s=e.y-t.y;return r*r+s*s},O=j(t),k={};k[f]=m(j(f),O),k[v]=m(j(v),O),k[y]=m(j(y),O),k[b]=m(j(b),O),s.sort((function(e,t){return k[t]-k[e]})),0===s.length?h=!0:(l[c]=s,c=s.pop(),i.push(c))}())break}return{found:p,route:p?i:[]}}},{key:"onSquareClicked",value:function(e){if(null!==this.state.squares[e]&&"p"===this.state.squares[e].type)this.setState({selected:e});else if(null!=this.state.selected&&this.movable(this.state.selected,e).found){var t=null,r=this.fItems(),s=[e],n=this.state.squares.slice();if(n[e]&&"f"===n[e].type){var o=(t=this.randomFreeSquareIndex(this.numberOfPreRenderedItemAtEachMove+1,n,[e,this.state.selected])).pop();n[o]={type:"p",color:n[e].color},s.push(o),r.splice(r.indexOf(e),1)}else t=this.randomFreeSquareIndex(this.numberOfPreRenderedItemAtEachMove,n,[e,this.state.selected]);r.forEach((function(e){n[e]={type:"p",color:n[e].color},s.push(e)}));for(var a=0;a<this.numberOfPreRenderedItemAtEachMove;a++)n[t.pop()]={type:"f",color:this.colors[Math.floor(Math.random()*this.colors.length)]};n[e]={type:n[this.state.selected].type,color:n[this.state.selected].color},n[this.state.selected]=null;var c,i=this.checkResolved(n,s),l=Object(p.a)(i);try{for(l.s();!(c=l.n()).done;){var h=c.value;n[h]=null}}catch(u){l.e(u)}finally{l.f()}this.setState({squares:n,selected:null}),i.length>0&&this.props.score_incr(i.length)}else this.setState({selected:null})}},{key:"checkResolved",value:function(e,t){var r=[],s=this.w,n=this.h;return t.forEach((function(t){for(var o=e[t].type,a=e[t].color,c=Math.floor(t/n)*s,i=c+s,l=[],h=t+1;h<i&&e[h]&&e[h].type===o&&e[h].color===a;h++)l.push(h);for(var u=[],p=t-1;p>=c&&e[p]&&e[p].type===o&&e[p].color===a;p--)u.push(p);u.length+l.length+1>=5&&(r=[t].concat(l,u));for(var f=[],d=t+s;d<e.length&&e[d]&&e[d].type===o&&e[d].color===a;d+=s)f.push(d);for(var v=[],y=t-s;y>=0&&e[y]&&e[y].type===o&&e[y].color===a;y-=s)v.push(y);v.length+f.length+1>=5&&(r=[t].concat(f,v));for(var b=[],j=t+s+1;j<e.length&&e[j]&&e[j].type===o&&e[j].color===a;j+=s+1)b.push(j);for(var m=[],O=t-s-1;O>=0&&e[O]&&e[O].type===o&&e[O].color===a;O-=s+1)m.push(O);m.length+b.length+1>=5&&(r=[t].concat(b,m));for(var k=[],g=t+s-1;g<e.length&&e[g]&&e[g].type===o&&e[g].color===a;g+=s-1)k.push(g);for(var x=[],q=t-s+1;q>=0&&e[q]&&e[q].type===o&&e[q].color===a;q-=s-1)x.push(q);x.length+k.length+1>=5&&(r=[t].concat(k,x))})),r}},{key:"renderSquare",value:function(e){var t=this;return Object(f.jsx)(v,{item:this.state.squares[e],onClick:function(){return t.onSquareClicked(e)},isActivated:this.state.selected===e},e)}},{key:"renderRows",value:function(){for(var e=[],t=0;t<this.state.squares.length;t++)e.push(this.renderSquare(t));return e}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"game-board",children:this.renderRows()})}}]),r}(l.a.Component),b=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"render",value:function(){return Object(f.jsx)("span",{children:this.props.score})}}]),r}(l.a.Component),j=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).state={score:0},n.increaseScore=n.increaseScore.bind(Object(o.a)(n)),n}return Object(n.a)(r,[{key:"increaseScore",value:function(e){this.setState({score:this.state.score+e})}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"game",children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"score-board",children:[Object(f.jsx)("span",{children:"Score: "}),Object(f.jsx)(b,{score:this.state.score})]}),Object(f.jsx)(y,{w:"9",h:"9",score_incr:this.increaseScore})]})})}}]),r}(l.a.Component);u.a.render(Object(f.jsx)(j,{}),document.getElementById("root"))},8:function(e,t,r){}},[[16,1,2]]]);
//# sourceMappingURL=main.42a3e1fa.chunk.js.map